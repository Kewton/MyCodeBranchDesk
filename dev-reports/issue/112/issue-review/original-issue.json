{"body":"## 概要\n\niPadでサイドバーの表示/非表示を切り替える際、動作が若干モッサリしている問題を改善する。\n\n## 現状の問題\n\nデスクトップ向けサイドバー（`AppShell.tsx`）が`width`プロパティのCSSトランジションを使用しているため、レイアウト再計算（Reflow）が発生しパフォーマンスが低下している。\n\n```typescript\n// 現状 (AppShell.tsx:89-96)\n<aside\n  className={`\n    flex-shrink-0 h-full\n    transition-all duration-300 ease-out\n    ${isOpen ? 'w-72' : 'w-0'}  // ← width変更がReflowを引き起こす\n    overflow-hidden\n  `}\n>\n```\n\n## 原因分析\n\n| 項目 | 現状（デスクトップ/iPad） | モバイル |\n|------|--------------------------|----------|\n| アニメーション方式 | `width: 0` ↔ `width: 18rem` | `transform: translateX()` |\n| レンダリング | レイアウト再計算 (Reflow) | GPUコンポジット |\n| パフォーマンス | 重い（CPU負荷） | 軽い（GPU活用） |\n\n- `width`の変更はブラウザのレイアウト再計算を引き起こす\n- サイドバーの幅が変わると、隣接するメインコンテンツの幅も再計算\n- iPadは画面が広くレイアウト対象の要素が多いため、この影響が顕著\n- `transition-all`は全プロパティを監視するため、さらにオーバーヘッドが発生\n\n## 対策\n\n`width`方式から`transform`方式に変更し、GPUアクセラレーションを活用する。\n\n### 実装イメージ\n\n```typescript\n// Before (現状)\n<aside className={`${isOpen ? 'w-72' : 'w-0'} transition-all`}>\n\n// After (transform方式)\n<aside className={`w-72 ${isOpen ? 'translate-x-0' : '-translate-x-full'} transition-transform`}>\n\n// メインコンテンツ側\n<main className={`${isOpen ? 'ml-72' : 'ml-0'} transition-[margin]`}>\n```\n\n## 対象ファイル\n\n- `src/components/layout/AppShell.tsx`\n\n## 影響範囲\n\n| 影響対象 | 影響内容 | リスク |\n|---------|---------|-------|\n| デスクトップPC | 同じtransform方式に変更 | 低（パフォーマンス向上） |\n| iPad | 同上 | 低（今回の目的） |\n| モバイル | 変更なし（既にtransform方式） | なし |\n\n## 受け入れ条件\n\n- [ ] サイドバートグル時にスムーズなアニメーションが実現される\n- [ ] iPadでモッサリ感が解消される\n- [ ] デスクトップPCで既存動作に問題がない\n- [ ] モバイル表示に影響がない\n- [ ] ESLint/TypeScriptチェックがパスする\n\n## 関連\n\n- Issue #104（iPad フルスクリーン対応）の調査中に発見","title":"perf: サイドバートグルのパフォーマンス改善（transform方式への変更）"}
