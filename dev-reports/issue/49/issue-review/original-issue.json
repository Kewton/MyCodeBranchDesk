{"body":"## 概要\n\nユーザーからのコンテキストを直接ドキュメント化したい場合、現状はコマンドから指示をするしか無いが煩わしい。\nGUIからマークダウンファイルの作成・編集・管理を可能にし、ドキュメント作業の効率を向上させる。\n\n## 利用シーン\n\n- **プロジェクトドキュメント管理**: README、設計書、仕様書などをCommandMate内で直接編集\n- **Claude Codeへの指示書作成**: Claude Codeに渡すコンテキストや指示をmdファイルで準備\n- **開発メモ・作業ログ**: 日々の作業記録やメモをworktree単位で管理\n\n## 機能要件\n\n### ファイルツリー操作（Filesタブ拡張）\n\n| 操作 | 説明 |\n|------|------|\n| ディレクトリ追加 | 任意のパスに新規ディレクトリを作成 |\n| ディレクトリリネーム | 既存ディレクトリ名を変更 |\n| mdファイル追加 | 新規マークダウンファイルを作成 |\n| mdファイル削除 | 既存マークダウンファイルを削除（確認ダイアログ付き） |\n| mdファイル編集 | プレーンテキストエディタで編集 |\n\n**注意**: 上記以外の操作（ファイル移動、コピー等）は現状Claude Code経由での指示とする。\n\n### エディタ・ビューワー\n\n- **編集モード**: プレーンテキストエディタ（シンプル）\n- **プレビュー**: マークダウンレンダリング表示\n- **デフォルトレイアウト**: 分割表示（左: エディタ、右: プレビュー）\n\n### 表示モード切り替え\n\nユーザーの好みや作業内容に応じて表示モードを切り替え可能にする。\n\n| モード | 説明 |\n|--------|------|\n| 分割表示 | 左にエディタ、右にプレビューを並列表示（デフォルト） |\n| エディタのみ | テキスト編集に集中したい場合 |\n| プレビューのみ | レンダリング結果の確認・閲覧時 |\n\n切り替えUIはトグルボタンまたはタブで実装。\n\n## 技術仕様\n\n### UI配置\n\n- 既存のFilesタブを拡張\n- mdファイル選択時にエディタ/プレビューパネルを表示\n- 表示モード切り替えボタンをパネル上部に配置\n\n### セキュリティ・制限\n\n| 項目 | 制限 |\n|------|------|\n| 編集可能ファイル | `.md` 拡張子のみ |\n| アクセス範囲 | 選択中のworktree内のみ |\n| パストラバーサル | worktree外へのアクセスを禁止 |\n\n### API設計（案）\n\n| エンドポイント | メソッド | 説明 |\n|---------------|----------|------|\n| `/api/files` | GET | ファイルツリー取得 |\n| `/api/files` | POST | ファイル/ディレクトリ作成 |\n| `/api/files` | PUT | ファイル内容更新、リネーム |\n| `/api/files` | DELETE | ファイル/ディレクトリ削除 |\n| `/api/files/content` | GET | ファイル内容取得 |\n\n## 受け入れ条件\n\n- [ ] Filesタブでディレクトリの追加・リネームができる\n- [ ] Filesタブでmdファイルの追加・削除ができる\n- [ ] mdファイル選択時にエディタが表示される\n- [ ] エディタでmdファイルを編集・保存できる\n- [ ] 分割表示でマークダウンプレビューが確認できる\n- [ ] 表示モード（分割/エディタのみ/プレビューのみ）を切り替えできる\n- [ ] worktree外へのアクセスが禁止されている\n- [ ] md以外のファイルは編集不可（表示のみ or 非表示）\n\n## 対象外（スコープ外）\n\n- 画像アップロード機能\n- リッチテキストエディタ（WYSIWYG）\n- ファイルの移動・コピー機能\n- md以外のファイル編集\n- worktree間でのファイル共有\n\n## 関連\n\n- 既存のFilesタブ実装\n- Issue #71（クローンURL登録機能）のUI参考","title":"マークダウンエディタとビューワーを追加"}
