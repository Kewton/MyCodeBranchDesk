{
  "issue_number": 31,
  "issue_title": "サイドバーのUX改善",
  "iteration": 1,
  "phase_results": {
    "tdd": {
      "status": "success",
      "tests_passed": 982,
      "tests_failed": 0,
      "coverage": 67.99
    },
    "acceptance": {
      "status": "passed",
      "criteria_met": 6,
      "criteria_total": 6
    },
    "refactor": {
      "status": "skipped",
      "reason": "Code already clean and follows best practices"
    }
  },
  "implemented_features": [
    "G1: waitingステータスの色を黄色に変更（SF1で完了）",
    "G2: hasUnreadロジックを lastAssistantMessageAt > lastViewedAt に修正",
    "G3: DBスキーマに last_viewed_at カラムを追加",
    "G4: 既読更新API（PATCH /api/worktrees/:id/viewed）を追加",
    "G5: lastAssistantMessageAt をサブクエリで取得",
    "G6: フロントエンド既読連携（ブランチ選択時にviewed API呼び出し）"
  ],
  "files_modified": [
    "src/config/status-colors.ts",
    "src/types/sidebar.ts",
    "src/lib/db.ts",
    "src/lib/db-migrations.ts",
    "src/app/api/worktrees/[id]/viewed/route.ts",
    "src/contexts/WorktreeSelectionContext.tsx",
    "src/lib/api-client.ts",
    "src/types/models.ts"
  ],
  "test_files": [
    "tests/unit/types/sidebar.test.ts",
    "tests/unit/types/sidebar-hasunread.test.ts",
    "tests/unit/db-viewed-tracking.test.ts",
    "tests/integration/api-viewed.test.ts"
  ]
}
