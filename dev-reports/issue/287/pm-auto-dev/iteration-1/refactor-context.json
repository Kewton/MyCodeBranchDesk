{
  "issue_number": 287,
  "refactor_targets": [
    "src/app/api/worktrees/[id]/prompt-response/route.ts",
    "src/components/worktree/WorktreeDetailRefactored.tsx",
    "src/hooks/useAutoYes.ts"
  ],
  "quality_metrics": {
    "before_coverage": {
      "route_ts_lines": 73.84,
      "route_ts_functions": 80.0
    }
  },
  "improvement_goals": [
    "コードの可読性向上（変数名の明確化、コメント追加）",
    "重複コードの削減（該当する場合）",
    "エラーハンドリングの改善（必要に応じて）",
    "型安全性の向上",
    "カバレッジを85%以上に向上（可能であれば）"
  ],
  "constraints": [
    "既存のテストが全てパスすること",
    "後方互換性を保つこと",
    "パフォーマンスを劣化させないこと"
  ],
  "notes": [
    "Issue本文に「route.tsとauto-yes-manager.ts（L343-399）のカーソルキー送信ロジックには重複が存在する。本Issueでは影響範囲外のため対応しないが、重複解消のリファクタリングは別Issueでの検討を推奨する」との記載あり。本イテレーションではこの重複解消は行わない",
    "WorktreeDetailRefactored.tsxのuseCallbackにstate.prompt.dataを追加した影響について、Issue本文に「ポーリング頻度による関数再生成とReact.memoによる保護の関係を考慮すると、実質的なパフォーマンス影響は無視できるレベル」との分析あり"
  ]
}
