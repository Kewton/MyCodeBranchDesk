{
  "stage": 4,
  "stage_name": "Stage 3 Impact Review - Apply",
  "issue_number": 100,
  "iteration": 1,
  "apply_date": "2026-01-30",
  "applied_items": [
    {
      "id": "MF-001",
      "category": "must_fix",
      "title": "mermaidライブラリのSSR非互換性への対応が不十分",
      "status": "applied",
      "change_summary": "非機能要件に「SSR対応の実装方針」セクションを追加。next/dynamic (ssr: false)、useEffect、rehype-mermaid使用時の3つの実装方式を具体的なコード例付きで記載"
    },
    {
      "id": "SF-001",
      "category": "should_fix",
      "title": "バンドルサイズ増加に対する具体的な軽減策が不足",
      "status": "applied",
      "change_summary": "バンドルサイズへの影響セクションを大幅拡充。(1) next/dynamicでの遅延読み込み実装例、(2) 条件付き読み込みコード例、(3) npm run build後のサイズ測定方法を追記"
    },
    {
      "id": "SF-002",
      "category": "should_fix",
      "title": "テスト戦略にrehype-sanitize互換性テストが含まれていない",
      "status": "applied",
      "change_summary": "AC-04に「互換性: rehype-sanitizeとの互換性テスト（mermaid生成SVGが正常に表示されること）」を追加"
    },
    {
      "id": "SF-003",
      "category": "should_fix",
      "title": "CI/CDパイプラインへの影響が未考慮",
      "status": "applied",
      "change_summary": "「CI/CDへの影響」セクションを新規追加。npm install時間(+10-20秒)、ビルド時間(軽微)、テスト時間(+5-10秒)、影響ワークフローを記載"
    },
    {
      "id": "SF-004",
      "category": "should_fix",
      "title": "既存マークダウンプレビュー機能への非破壊性保証が明示されていない",
      "status": "applied",
      "change_summary": "AC-03に回帰テストの具体的内容を追加。「既存のGFMテーブル、リスト、コードブロック（mermaid以外）のレンダリングが変更されないことを確認」「rehypePlugins順序変更やスキーマ変更による副作用がないことを検証」"
    },
    {
      "id": "NTH-001",
      "category": "nice_to_have",
      "title": "アプローチ選定の推奨案が明示されていない",
      "status": "applied",
      "change_summary": "実装アプローチ比較表に「推奨度」列を追加。アプローチB（rehype-mermaid）を推奨として明示し、理由（既存プラグインとの統合容易性、活発なメンテナンス）を記載"
    },
    {
      "id": "NTH-002",
      "category": "nice_to_have",
      "title": "将来のダイアグラム拡張への考慮がない",
      "status": "applied",
      "change_summary": "「将来の拡張ポイント」セクションを追加。PlantUML/Graphviz等への要望可能性とDiagramRenderer interface抽象化の検討を記載"
    },
    {
      "id": "NTH-003",
      "category": "nice_to_have",
      "title": "mermaidバージョンの固定方針が未記載",
      "status": "applied",
      "change_summary": "「mermaidバージョン方針」セクションを追加。マイナーバージョン固定（^11.12.x）とセキュリティアップデート確認方針を記載"
    }
  ],
  "skipped_items": [],
  "summary": {
    "total_findings": 8,
    "must_fix": {
      "total": 1,
      "applied": 1,
      "skipped": 0
    },
    "should_fix": {
      "total": 4,
      "applied": 4,
      "skipped": 0
    },
    "nice_to_have": {
      "total": 3,
      "applied": 3,
      "skipped": 0
    }
  },
  "issue_updated": true,
  "github_update": {
    "status": "success",
    "issue_url": "https://github.com/Kewton/CommandMate/issues/100"
  },
  "changes_made": [
    {
      "section": "非機能要件",
      "change": "SSR対応の実装方針を3つの方式（next/dynamic, useEffect, rehype-mermaid）で詳細化"
    },
    {
      "section": "技術検討事項 - 実装アプローチ候補",
      "change": "推奨度列を追加し、rehype-mermaidを推奨として明示"
    },
    {
      "section": "技術検討事項 - バンドルサイズへの影響",
      "change": "軽減策を3項目（遅延読み込み、条件付き読み込み、サイズ測定方法）で詳細化"
    },
    {
      "section": "技術検討事項 - CI/CDへの影響",
      "change": "新規セクション追加（install/build/test時間への影響）"
    },
    {
      "section": "技術検討事項 - 将来の拡張ポイント",
      "change": "新規セクション追加（DiagramRenderer抽象化検討）"
    },
    {
      "section": "技術検討事項 - mermaidバージョン方針",
      "change": "新規セクション追加（バージョン固定方針）"
    },
    {
      "section": "受け入れ条件 - AC-03",
      "change": "回帰テストの具体的検証内容を追加"
    },
    {
      "section": "受け入れ条件 - AC-04",
      "change": "rehype-sanitize互換性テストを追加"
    },
    {
      "section": "レビュー履歴",
      "change": "Stage 3 Impact Reviewの履歴を追加"
    }
  ]
}
