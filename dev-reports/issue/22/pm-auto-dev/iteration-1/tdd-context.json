{
  "issue_number": 22,
  "issue_title": "マルチタスク強化",
  "phase": "Phase 1: 基盤構築",
  "design_doc": "dev-reports/design/issue-22-multitask-sidebar-design-policy.md",
  "work_plan": "dev-reports/issue/22/work-plan.md",
  "acceptance_criteria": [
    "サイドバーからブランチを選択可能にする",
    "サイドバーの表示・非表示を切り替え可能にする",
    "ブランチの状況（応答待ち、応答済み）をサイドバーから確認可能にする",
    "モバイルでもサイドバーを表示可能にする（デフォルト非表示）"
  ],
  "implementation_tasks": [
    {
      "id": "1.1",
      "task": "型定義作成",
      "file": "src/types/sidebar.ts",
      "description": "BranchStatus型、SidebarBranchItem型、toBranchItem関数を定義"
    },
    {
      "id": "1.2",
      "task": "SidebarContext 実装",
      "file": "src/contexts/SidebarContext.tsx",
      "description": "サイドバーの開閉状態、モバイルドロワー状態を管理するContext"
    },
    {
      "id": "1.3",
      "task": "WorktreeSelectionContext 実装",
      "file": "src/contexts/WorktreeSelectionContext.tsx",
      "description": "選択中のworktree、worktree一覧、楽観的UI更新を管理するContext"
    },
    {
      "id": "1.4",
      "task": "useSidebar hook 実装",
      "file": "src/hooks/useSidebar.ts",
      "description": "SidebarContextを使用するカスタムhook、localStorage永続化"
    },
    {
      "id": "1.5",
      "task": "AppShell コンポーネント実装",
      "file": "src/components/layout/AppShell.tsx",
      "description": "サイドバー+メイン統合レイアウト（デスクトップ/モバイル対応）"
    },
    {
      "id": "1.6",
      "task": "SidebarToggle コンポーネント実装",
      "file": "src/components/layout/SidebarToggle.tsx",
      "description": "サイドバー表示切替ボタン"
    },
    {
      "id": "2.1",
      "task": "Sidebar コンポーネント実装",
      "file": "src/components/layout/Sidebar.tsx",
      "description": "サイドバー本体（ブランチ一覧を含む）"
    },
    {
      "id": "2.3",
      "task": "BranchListItem 実装",
      "file": "src/components/sidebar/BranchListItem.tsx",
      "description": "ブランチ一覧の各アイテム"
    },
    {
      "id": "2.4",
      "task": "BranchStatusIndicator 実装",
      "file": "src/components/sidebar/BranchStatusIndicator.tsx",
      "description": "ブランチのステータス表示（idle/running/waiting/generating）"
    }
  ],
  "target_coverage": 80,
  "test_port": 3001,
  "existing_files_to_reference": [
    "src/types/models.ts",
    "src/hooks/useIsMobile.ts",
    "src/hooks/useWebSocket.ts",
    "src/lib/api-client.ts",
    "src/components/worktree/WorktreeDetailRefactored.tsx"
  ]
}
