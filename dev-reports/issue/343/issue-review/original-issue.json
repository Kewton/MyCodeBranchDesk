{"body":"## 概要\n\n「/」入力時のスラッシュコマンドセレクターで、`.claude/commands/*.md` に加えて `.claude/skills/*/SKILL.md` も読み込み、統合表示する。\n\n## 背景・動機\n\n現在、スラッシュコマンドセレクター（「/」入力時に表示されるドロップダウン）は `.claude/commands/*.md` ファイルのみを読み込んでいる。\n\nしかし、Claude Code はスラッシュコマンド（commands）に加えて **skills**（`.claude/skills/*/SKILL.md`）もサポートしている。CommandMate-Marketing リポジトリのように commands を持たず skills のみを持つリポジトリでは、「/」入力時に標準コマンド（clear, compact等）しか表示されず、登録済みの skills が見つけられない。\n\n### 影響を受けるリポジトリ例\n\n| リポジトリ | `.claude/commands/` | `.claude/skills/` |\n|---|---|---|\n| MyCodeBranchDesk | 20ファイル | rebuild, release, release-post |\n| CommandMate-Marketing | なし | gog-gmail, gog-calendar, x-analytics, x-post, x-search |\n\n## 現状の仕組み\n\n1. `src/lib/slash-commands.ts` - `.claude/commands/*.md` のみを読み込み\n2. `src/app/api/worktrees/[id]/slash-commands/route.ts` - worktree パスの `.claude/commands/` からコマンドを取得\n3. `src/lib/command-merger.ts` - Standard + MCBD + Worktree コマンドをマージ\n4. `src/hooks/useSlashCommands.ts` - API からコマンドを取得し UI に表示\n5. `src/components/worktree/SlashCommandSelector.tsx` - セレクター UI\n\n## 要件\n\n### 機能要件\n\n- [ ] `.claude/skills/*/SKILL.md` の frontmatter（name, description）を読み込む\n- [ ] skills をスラッシュコマンドセレクターに「Skills」カテゴリとして表示する\n- [ ] commands と skills を統合して表示する（既存の commands 表示は変更しない）\n- [ ] skills 選択時は `/{skill-name}` としてメッセージ入力に反映される\n\n### skills の SKILL.md 構造\n\n```yaml\n---\nname: gog-gmail\ndescription: Search and read Gmail using gog CLI\ndisable-model-invocation: true\nargument-hint: [search query]\n---\n```\n\n### 非機能要件\n\n- 既存の commands 読み込み・表示に影響を与えない\n- skills ディレクトリが存在しない場合はスキップ（エラーにしない）\n\n## 影響範囲\n\n### 変更が必要なファイル（候補）\n\n| ファイル | 変更内容 |\n|---|---|\n| `src/lib/slash-commands.ts` | skills 読み込みロジック追加（`loadSkills()` 関数） |\n| `src/types/slash-commands.ts` | `SlashCommandCategory` に `'skill'` 追加、`CATEGORY_LABELS` 更新 |\n| `src/app/api/worktrees/[id]/slash-commands/route.ts` | skills の取得・マージ追加 |\n| `src/lib/command-merger.ts` | skills マージロジック（必要に応じて） |\n\n## 受け入れ条件\n\n1. CommandMate-Marketing の worktree 画面で「/」入力時に `gog-gmail`, `gog-calendar` 等の skills が表示される\n2. MyCodeBranchDesk の worktree 画面で既存の commands に加え `rebuild`, `release` 等の skills も表示される\n3. skills を選択すると `/{skill-name}` がメッセージ入力欄に反映される\n4. skills ディレクトリが存在しないリポジトリではエラーが発生しない\n5. 既存の commands の表示・動作に変更がない","title":"feat: スラッシュコマンドセレクターで .claude/skills も表示する"}
