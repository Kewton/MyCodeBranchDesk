{"body":"## 概要\n\nマークダウンエディタのプレビュー機能で、mermaidダイアグラム（フローチャート、シーケンス図、ER図など）を描画できるようにする。\n\n## 背景\n\n- Issue #99 でマークダウンエディタを実装\n- 現在、```` ```mermaid ```` コードブロックはプレーンテキストとして表示される\n- GitHub等のプラットフォームではmermaidがネイティブサポートされており、ユーザーの期待値が高い\n\n## 要件\n\n### 機能要件\n- [ ] ```` ```mermaid ```` コードブロックをSVGダイアグラムとして描画\n- [ ] 対応ダイアグラム種別:\n  - フローチャート (flowchart/graph)\n  - シーケンス図 (sequenceDiagram)\n  - クラス図 (classDiagram)\n  - ER図 (erDiagram)\n  - ガントチャート (gantt)\n  - その他mermaid標準サポート図\n\n### 非機能要件\n- [ ] SSR/CSR両方で正常動作\n- [ ] 構文エラー時は適切なエラーメッセージを表示\n- [ ] パフォーマンス: 大きなダイアグラムでもプレビューがブロックされない\n\n## 技術検討事項\n\n### 実装アプローチ候補\n\n| アプローチ | 複雑度 | 説明 |\n|-----------|--------|------|\n| A. カスタムコンポーネント | 中 | ReactMarkdown の `components` prop で code ブロックをカスタマイズ |\n| B. rehype-mermaid プラグイン | 低 | 既存パッケージ（@tntd/react-markdown-mermaid等）を使用 |\n| C. 動的スクリプト読み込み | 低〜中 | Next.js Script で mermaid CDN を読み込み |\n\n### 影響ファイル（想定）\n- `src/components/worktree/MarkdownEditor.tsx`\n- `package.json`\n\n## 受け入れ条件\n\n- [ ] AC-01: mermaidコードブロックがSVGダイアグラムとして描画される\n- [ ] AC-02: 構文エラー時にエラーメッセージが表示される\n- [ ] AC-03: 既存のマークダウンプレビュー機能に影響がない\n- [ ] AC-04: 単体テストが追加されている\n\n## 参考資料\n\n- [Mermaid 公式サイト](https://mermaid.js.org/)\n- [GitHub Blog - Mermaid in Markdown](https://github.blog/developer-skills/github/include-diagrams-markdown-files-mermaid/)\n- [@tntd/react-markdown-mermaid - npm](https://www.npmjs.com/package/@tntd/react-markdown-mermaid)\n\n## 関連Issue\n\n- #99 マークダウンエディタ表示改善","title":"feat: マークダウンプレビューでmermaidダイアグラムを描画できるようにする"}