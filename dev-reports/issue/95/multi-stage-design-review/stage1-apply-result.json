{
  "stage": 1,
  "stage_name": "通常レビュー（設計原則）",
  "status": "completed",
  "applied_at": "2026-01-30T10:30:00+09:00",
  "target_file": "dev-reports/design/issue-95-image-viewer-design-policy.md",
  "summary": {
    "must_fix": {
      "total": 0,
      "applied": 0,
      "skipped": 0
    },
    "should_fix": {
      "total": 3,
      "applied": 3,
      "skipped": 0
    },
    "nice_to_have": {
      "total": 3,
      "applied": 3,
      "skipped": 0
    }
  },
  "applied_items": [
    {
      "id": "SF-001",
      "category": "DRY",
      "description": "FileContent interface が2箇所で定義される可能性",
      "action_taken": "「影響ファイル一覧」と「実装タスク Phase 1」に FileViewer.tsx のローカル interface 削除を明記。「データモデル設計」セクションに変更前後のコード例を追加。"
    },
    {
      "id": "SF-002",
      "category": "SRP",
      "description": "validateSvgContent() が2つの責務を持つ",
      "action_taken": "「セキュリティ設計」セクションの validateSvgContent() に JSDoc コメントで「フォーマット検証」と「セキュリティ検証」の2つの目的を明記。将来的な分離可能性についても言及。"
    },
    {
      "id": "SF-003",
      "category": "Open-Closed",
      "description": "IMAGE_EXTENSION_VALIDATORS の拡張性",
      "action_taken": "「データモデル設計」セクションと「採用した設計」トレードオフに「新形式追加は配列への手動追加が必要」と明記。Registry パターン移行の検討を代替案に追加。"
    },
    {
      "id": "NTH-001",
      "category": "KISS",
      "description": "next/image vs img タグの選定",
      "action_taken": "「技術選定」セクションを更新し、img タグを選定。Base64 data URI では next/image の恩恵が少ない理由を明記。「UIコンポーネント設計」に実装例追加。"
    },
    {
      "id": "NTH-002",
      "category": "DRY",
      "description": "isExtensionInList() ユーティリティ",
      "action_taken": "「セキュリティ設計」セクションの isImageExtension() にコメントで将来検討メモを追加（YAGNI原則により現時点では不要）。"
    },
    {
      "id": "NTH-003",
      "category": "Documentation",
      "description": "FileContent 型拡張パターン",
      "action_taken": "「データモデル設計」セクションに型拡張パターンの明確化コメントを追加。将来的な ImageFileContent extends FileContent パターンについても言及。"
    }
  ],
  "skipped_items": [],
  "design_changes": [
    {
      "section": "技術選定",
      "change": "画像表示を next/image から img タグに変更、KISS原則に基づく選定理由を補足追加"
    },
    {
      "section": "データモデル設計",
      "change": "FileContent interface に型拡張パターンのコメント追加、FileViewer.tsx での変更手順を明記"
    },
    {
      "section": "画像拡張子設定",
      "change": "IMAGE_EXTENSION_VALIDATORS に Open-Closed 原則のトレードオフコメント追加"
    },
    {
      "section": "セキュリティ設計",
      "change": "validateSvgContent() に JSDoc で責務を明記、isImageExtension() に将来検討メモ追加"
    },
    {
      "section": "UIコンポーネント設計",
      "change": "ImageViewer の実装例を追加（シンプルな img タグ使用）"
    },
    {
      "section": "影響ファイル一覧",
      "change": "FileViewer.tsx の変更内容にローカル interface 削除を明記"
    },
    {
      "section": "実装タスク",
      "change": "Phase 1 に FileViewer.tsx のローカル interface 削除タスクを追加"
    },
    {
      "section": "設計上の決定事項",
      "change": "採用した設計に img タグ選定とトレードオフを追加、代替案に Registry パターンを追加"
    },
    {
      "section": "レビュー指摘対応（新規）",
      "change": "Stage 1 レビュー対応セクションを新規追加、全指摘事項の対応内容を記録"
    },
    {
      "section": "実装チェックリスト（新規）",
      "change": "レビュー指摘を反映した実装チェックリストを新規追加"
    }
  ],
  "notes": "must_fix 項目はなし。should_fix 3件、nice_to_have 3件の全てを設計方針書に反映完了。"
}
