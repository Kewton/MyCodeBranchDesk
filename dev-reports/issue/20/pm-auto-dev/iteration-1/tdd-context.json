{
  "issue_number": 20,
  "title": "スマホ利用時決定キーでチャット送信ではなく改行したい",
  "acceptance_criteria": [
    "モバイルデバイスでEnterキーを押すと改行が入力される",
    "モバイルデバイスでは送信ボタンでのみメッセージが送信される",
    "デスクトップではEnterキーでメッセージが送信される（現状維持）",
    "デスクトップではShift+Enterで改行が入力される（現状維持）",
    "IME入力中はEnterキーで送信されない（現状維持）",
    "送信ボタンにaria-labelが設定されている"
  ],
  "implementation_tasks": [
    {
      "id": "1.1",
      "name": "handleKeyDown関数の修正",
      "file": "src/components/worktree/MessageInput.tsx",
      "description": "isMobile条件分岐を追加し、モバイルではEnterで改行、デスクトップではEnterで送信する"
    },
    {
      "id": "1.2",
      "name": "送信ボタンのaria-label追加",
      "file": "src/components/worktree/MessageInput.tsx",
      "description": "送信ボタンにaria-label=\"Send message\"を追加"
    },
    {
      "id": "2.1",
      "name": "ユニットテスト作成",
      "file": "src/components/worktree/__tests__/MessageInput.test.tsx",
      "description": "デスクトップ・モバイル両方の動作をテスト"
    }
  ],
  "target_coverage": 80,
  "test_scenarios": [
    {
      "name": "Desktop: Enter key submits message",
      "device": "desktop",
      "action": "Enter key press",
      "expected": "Message is submitted"
    },
    {
      "name": "Desktop: Shift+Enter inserts newline",
      "device": "desktop",
      "action": "Shift+Enter key press",
      "expected": "Newline is inserted"
    },
    {
      "name": "Mobile: Enter key inserts newline",
      "device": "mobile",
      "action": "Enter key press",
      "expected": "Newline is inserted"
    },
    {
      "name": "Mobile: Send button submits message",
      "device": "mobile",
      "action": "Send button click",
      "expected": "Message is submitted"
    },
    {
      "name": "IME: Enter key does not submit during composition",
      "device": "both",
      "action": "Enter key during IME composition",
      "expected": "Message is not submitted"
    },
    {
      "name": "Accessibility: Send button has aria-label",
      "device": "both",
      "action": "Check button attributes",
      "expected": "aria-label=\"Send message\" is present"
    }
  ],
  "existing_code_location": {
    "component": "src/components/worktree/MessageInput.tsx",
    "handleKeyDown": "lines 148-176",
    "sendButton": "lines 215-230"
  },
  "related_hooks": [
    "src/hooks/useIsMobile.ts"
  ]
}
