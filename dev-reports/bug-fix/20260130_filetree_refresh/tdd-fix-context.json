{
  "bug_id": "20260130_filetree_refresh",
  "bug_description": "ファイル/ディレクトリ操作後にFilesタブの表示が更新されない（手動リロードが必要）",
  "root_cause": "FileTreeViewコンポーネントに外部からリフレッシュをトリガーする仕組みがない",
  "selected_actions": [
    {
      "action_id": "1",
      "title": "FileTreeViewにrefreshTrigger propを追加",
      "description": "数値propを追加し、変更時にuseEffectで再取得をトリガー",
      "files_to_modify": ["src/components/worktree/FileTreeView.tsx"]
    },
    {
      "action_id": "2",
      "title": "WorktreeDetailRefactoredでリフレッシュ状態管理",
      "description": "fileTreeRefresh状態を追加し、操作成功後にインクリメント",
      "files_to_modify": ["src/components/worktree/WorktreeDetailRefactored.tsx"]
    }
  ],
  "implementation_details": {
    "FileTreeView.tsx": [
      "FileTreeViewPropsにrefreshTrigger?: numberを追加",
      "useEffectの依存配列にrefreshTriggerを追加",
      "キャッシュもクリアする"
    ],
    "WorktreeDetailRefactored.tsx": [
      "const [fileTreeRefresh, setFileTreeRefresh] = useState(0)を追加",
      "handleNewFile/handleNewDirectory/handleRename/handleDeleteの成功時にsetFileTreeRefresh(prev => prev + 1)を呼び出し",
      "FileTreeViewにrefreshTrigger={fileTreeRefresh}を渡す"
    ]
  },
  "target_coverage": 80
}
