{"body":"## 概要\n\n過去の実装で不要になったモジュール・コンポーネント・ページルートを削除し、コードベースの健全性を維持する。Issue #193で`response-poller.ts`に置き換えられた`claude-poller.ts`、一度も使用されていない`terminal-websocket.ts`、リファクタリング済みの旧`WorktreeDetail.tsx`コンポーネント、および正式なTerminal(xterm.js)で代替済みの`simple-terminal`ページを削除対象とする。\n\n## 背景・動機\n\n- 開発が進む中でモジュールの置き換え（claude-poller → response-poller）や、コンポーネントのリファクタリング（WorktreeDetail → WorktreeDetailRefactored）が行われたが、旧コードが残存している\n- `terminal-websocket.ts`は一度もインポート・使用されておらず、完全なデッドコードとなっている\n- `simple-terminal`ページはxterm.jsベースの正式なTerminalで代替されており、不要なルートが残っている\n- 未使用コードがあるとメンテナンス負荷が増加し、新規開発者の混乱を招く\n\n## リファクタリング方針\n\n高優先度の未使用コードに絞り、安全に削除する。\n\n### 削除対象\n\n| ファイル | 種別 | 理由 | LOC |\n|---------|------|------|-----|\n| `src/lib/claude-poller.ts` | 廃止モジュール | Issue #193で`response-poller.ts`に置き換え済み。コード内にも「unreachable」のTODOコメントあり | ~400 |\n| `src/lib/terminal-websocket.ts` | 未使用ファイル | コードベース内で一度もインポートされていない | ~150 |\n| `src/components/worktree/WorktreeDetail.tsx` | 旧コンポーネント | `WorktreeDetailRefactored.tsx`に置き換え済み | ~200 |\n| `src/app/worktrees/[id]/simple-terminal/page.tsx` | 不要ルート | xterm.jsベースのTerminalで代替済み | ~90 |\n| `src/components/SimpleTerminal.tsx` | 不要コンポーネント | simple-terminalページ削除に伴い不要 | - |\n\n### 修正が必要なファイル（参照の更新）\n\n| ファイル | 修正内容 |\n|---------|---------|\n| `src/lib/session-cleanup.ts` | `claude-poller.ts`からのimportを削除・代替 |\n| `src/lib/cli-tools/manager.ts` | `claude-poller.ts`からのimportを削除・代替 |\n| `src/components/worktree/index.ts` | `WorktreeDetail`のexportを削除 |\n\n### Before / After\n\n**Before**:\n- `claude-poller.ts`が残存し「unreachable」なコードパスが存在\n- `terminal-websocket.ts`が一度も使われず放置\n- `WorktreeDetail`と`WorktreeDetailRefactored`が並存\n- `simple-terminal`ページが正式Terminalと重複\n\n**After**:\n- 廃止・未使用モジュールが完全に除去\n- コンポーネントは`WorktreeDetailRefactored`に一本化\n- ターミナルページはxterm.jsベースのみに統一\n- 約840行以上のデッドコードを削減\n\n## 影響範囲\n\n### 変更対象ファイル\n\n| ファイル | 変更内容 |\n|---------|---------|\n| `src/lib/claude-poller.ts` | ファイル削除 |\n| `src/lib/terminal-websocket.ts` | ファイル削除 |\n| `src/components/worktree/WorktreeDetail.tsx` | ファイル削除 |\n| `src/app/worktrees/[id]/simple-terminal/page.tsx` | ファイル削除 |\n| `src/components/SimpleTerminal.tsx` | ファイル削除 |\n| `src/lib/session-cleanup.ts` | import修正 |\n| `src/lib/cli-tools/manager.ts` | import修正 |\n| `src/components/worktree/index.ts` | export修正 |\n\n### 関連コンポーネント\n\n- `response-poller.ts`（claude-pollerの後継、変更なし）\n- `WorktreeDetailRefactored.tsx`（WorktreeDetailの後継、変更なし）\n- `Terminal.tsx`（xterm.js版、変更なし）\n\n## 受入条件\n\n- [ ] 上記削除対象ファイルがすべて削除されていること\n- [ ] 参照ファイルのimport/exportが正しく更新されていること\n- [ ] `npm run build` が成功すること\n- [ ] `npm run test:unit` が全テストパスすること\n- [ ] `npm run lint` がエラーなしで通ること\n- [ ] 既存機能に影響がないこと（削除対象は未使用コードのみ）","title":"未使用コードの削除・リファクタリング"}
