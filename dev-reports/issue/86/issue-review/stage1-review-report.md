# Issue #86 レビューレポート

**レビュー日**: 2026-01-30
**フォーカス**: 通常レビュー
**イテレーション**: 1回目（Stage 1）
**Issueタイトル**: リリース手順書の作成とSkills化

---

## サマリー

| カテゴリ | 件数 |
|---------|------|
| Must Fix | 2 |
| Should Fix | 5 |
| Nice to Have | 3 |
| **合計** | **10** |

---

## Must Fix（必須対応）

### MF-1: Claude Code Skillsのフロントマター仕様の確認

**カテゴリ**: 技術的正確性
**場所**: ## 2. リリーススキルの作成 > スキル仕様

**問題**:
Issueに記載されているスキル仕様のフロントマターに`disable-model-invocation`オプションが含まれていますが、このオプションがClaude Code Skillsの正式仕様に存在するか確認が必要です。

**証拠**:
既存のSKILL.md（`.claude/skills/rebuild/SKILL.md`）には以下のフロントマターのみ使用されています:
- `name`
- `description`
- `allowed-tools`

`disable-model-invocation`は使用されていません。

**推奨対応**:
Claude Code Skills公式ドキュメント（https://code.claude.com/docs/ja/skills）で`disable-model-invocation`オプションの存在を確認し、存在しない場合は削除してください。

---

### MF-2: スキルとコマンドの区別の明確化

**カテゴリ**: 整合性
**場所**: ## 2. リリーススキルの作成

**問題**:
本プロジェクトでは以下の構成になっています:
- `.claude/commands/` - スラッシュコマンド（`/create-pr`, `/work-plan`等）
- `.claude/skills/` - スキル（`rebuild`のみ）

Issueでは`.claude/skills/release/`配下にファイルを配置しつつ、使用例として`/release patch`というスラッシュコマンド形式を想定しています。この整合性を確認する必要があります。

**証拠**:
- CLAUDE.mdの「利用可能なコマンド」には`.claude/commands/`配下のファイルが列挙されている
- `.claude/skills/`には`rebuild`スキルのみ存在
- rebuildスキルは「リビルド」「再起動」などの自然言語で呼び出される設計

**推奨対応**:
以下のいずれかを選択し、Issueを修正してください:
1. **コマンドとして実装**: `.claude/commands/release.md`に配置し、`/release`で呼び出し
2. **スキルとして実装**: `.claude/skills/release/SKILL.md`に配置し、「リリースして」などの自然言語で呼び出し

---

## Should Fix（推奨対応）

### SF-1: CHANGELOG更新手順の詳細化

**カテゴリ**: 完全性
**場所**: ## スコープ > 1. リリース手順書の作成

**問題**:
CHANGELOGの更新ルールが「Keep a Changelog形式」とのみ記載されており、具体的な手順が不足しています。

**推奨対応**:
以下の詳細を追加してください:
- `[Unreleased]`セクションの内容を`[X.Y.Z] - YYYY-MM-DD`セクションに移動する手順
- 日付フォーマット: `YYYY-MM-DD`（例: 2026-01-30）
- 比較リンクの更新方法（例: `[0.2.0]: https://github.com/.../compare/v0.1.0...v0.2.0`）

---

### SF-2: developブランチの扱いの明確化

**カテゴリ**: 明確性
**場所**: ## 補足情報

**問題**:
補足情報に「developブランチも存在する」と記載されていますが、リリースフローでのdevelopブランチの扱いが未定義です。

**推奨対応**:
以下を明確にしてください:
- リリースタグはmainブランチのみに作成するのか
- developブランチはリリース後にどう同期するのか
- main <- develop のマージフローは使用するのか

---

### SF-3: argument-hintオプションの確認

**カテゴリ**: 技術的妥当性
**場所**: ## 2. リリーススキルの作成 > スキル仕様

**問題**:
`argument-hint: [version-type] (major|minor|patch) or [version] (e.g., 1.2.3)`というオプションが記載されていますが、これがClaude Code Skillsの正式仕様か確認が必要です。

**推奨対応**:
Claude Code Skills公式ドキュメントで`argument-hint`オプションの存在と正確なフォーマットを確認してください。

---

### SF-4: エラーハンドリングの追加

**カテゴリ**: 完全性
**場所**: ## スコープ > 2. リリーススキルの作成

**問題**:
実行内容には正常系のフローのみ記載されており、エラー時の処理が定義されていません。

**推奨対応**:
以下のエラーケースの処理方法を追加してください:
1. 未コミットの変更がある場合 -> エラーメッセージを表示して中断
2. リモートとの差分がある場合 -> pull/pushを促す
3. タグが既に存在する場合 -> 上書き確認またはエラー
4. npm install失敗時 -> エラーメッセージを表示

---

### SF-5: 受け入れ条件の検証項目追加

**カテゴリ**: 整合性
**場所**: ## 受け入れ条件

**問題**:
受け入れ条件は「実行できる」のみで、実行結果の検証条件が具体的ではありません。

**推奨対応**:
各受け入れ条件に検証方法を追加してください:
- `/release patch` 実行後、`package.json`のversionが`0.1.1`に更新されていること
- `git tag --list`で新タグが確認できること
- `CHANGELOG.md`に新バージョンセクションが追加されていること

---

## Nice to Have（あれば良い）

### NTH-1: pre-releaseバージョンの扱い

**カテゴリ**: 完全性
**場所**: ## スコープ

**問題**:
セマンティックバージョニングではpre-releaseバージョン（例: `1.0.0-alpha.1`, `1.0.0-beta.2`, `1.0.0-rc.1`）が正式サポートされていますが、本Issueでは未定義です。

**推奨対応**:
将来的な拡張ポイントとして、pre-releaseバージョンのサポートを「スコープ外」セクションに記載しておくことを検討してください。

---

### NTH-2: ロールバック手順の追加

**カテゴリ**: 完全性
**場所**: ## スコープ > 1. リリース手順書の作成

**問題**:
リリース後に問題が発覚した場合のロールバック手順が含まれていません。

**推奨対応**:
リリース手順書にロールバック手順を含めることを検討してください:
- Gitタグの削除: `git tag -d vX.Y.Z && git push origin :refs/tags/vX.Y.Z`
- GitHub Releaseの削除: `gh release delete vX.Y.Z`
- package.json/CHANGELOGの巻き戻し

---

### NTH-3: /create-prコマンドとの連携

**カテゴリ**: 整合性
**場所**: ## スコープ

**問題**:
リリース作業後にPR作成が必要なケース（例: developブランチへのマージ）での`/create-pr`との連携が未検討です。

**推奨対応**:
リリースワークフローの一部として、必要に応じて`/create-pr`コマンドを呼び出す連携フローを検討してください。

---

## 参照ファイル

### コード

| ファイル | 関連性 |
|---------|--------|
| `.claude/skills/rebuild/SKILL.md` | 既存スキルの実装例。フロントマター仕様の参照用 |
| `.claude/commands/create-pr.md` | 既存コマンドの実装例。フロントマター仕様の参照用 |
| `package.json` | 現在のバージョン(0.1.0)の確認 |
| `CHANGELOG.md` | Keep a Changelog形式の実装確認 |

### ドキュメント

| ファイル | 関連性 |
|---------|--------|
| `CLAUDE.md` | プロジェクトのコマンド・エージェント一覧。スキル追加時の更新対象 |

---

## 総合評価

Issue #86は全体的に良く整理されており、リリース作業の標準化という目的は明確です。

**良い点**:
- セマンティックバージョニングの判断基準が明示されている
- Issue #40との依存関係が明確
- 受け入れ条件がチェックリスト形式で記載されている
- 参考ドキュメントへのリンクが充実

**改善が必要な点**:
1. Claude Code Skillsのフロントマター仕様に関して、`disable-model-invocation`と`argument-hint`の存在確認が必要
2. スキル（`.claude/skills/`）とコマンド（`.claude/commands/`）の使い分けの整理
3. エラーハンドリングやdevelopブランチの扱いなど、運用上の詳細の補完

**次のステップ**:
1. Must Fix項目（MF-1, MF-2）を優先的に対応
2. Should Fix項目のうち、SF-4（エラーハンドリング）とSF-5（受け入れ条件）を検討
3. Claude Code Skills公式ドキュメントでフロントマター仕様を確認
