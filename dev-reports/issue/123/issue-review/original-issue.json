{"body":"## 概要\n\nFilesにて長押ししてもファイルやディレクトリの追加メニューが表示されない\n\n## 環境\n\n- OS: iPadOS\n- ブラウザ: Chrome / Safari\n- CLI ツール: Claude Code\n\n## 原因分析\n\n### 根本原因\niPad Safari（およびChrome on iPad）では、`onContextMenu`イベントが長押しでトリガーされない仕様。\n現在の実装は`onContextMenu`イベントのみに依存しており、タッチデバイス向けの長押し検出が未実装。\n\n### 該当コード\n- `src/components/worktree/FileTreeView.tsx:302` - TreeNodeに`onContextMenu`のみ実装\n- `src/hooks/useContextMenu.ts:39` - `openMenu`関数が`React.MouseEvent`のみ対応\n\n## 解決方針\n\n1. **タッチイベントハンドラの追加**\n   - `onTouchStart` - 長押しタイマー開始\n   - `onTouchEnd` / `onTouchCancel` - タイマークリア\n\n2. **長押し検出ロジック実装**\n   - 閾値: 500ms程度（一般的な長押し判定時間）\n   - 移動検出: タッチ移動時はメニュー表示をキャンセル\n\n3. **型定義の拡張**\n   - `useContextMenu.ts`の`openMenu`を`React.MouseEvent | React.TouchEvent`に拡張\n\n4. **標準メニュー抑制**\n   - `-webkit-touch-callout: none`でiOSの標準コンテキストメニューを抑制\n\n## 参照実装\n\n`src/components/worktree/PaneResizer.tsx`にタッチ対応の正しいパターンが存在\n\n## 受け入れ条件\n\n- [ ] iPadで長押しによりコンテキストメニューが表示される\n- [ ] 長押し中にスクロールした場合はメニューが表示されない\n- [ ] PC（マウス右クリック）の既存動作が維持される\n- [ ] iPhone（iOS）でも同様に動作する","title":"iPad利用時ファイルの追加が出来ない"}
