{
  "issue_number": 113,
  "feature_summary": "server.tsをビルド済みJSに変換してtsxランタイム依存を解消",
  "acceptance_criteria": [
    {
      "id": "AC-1",
      "description": "npm install -g commandmate でインストール後、commandmate startが正常に動作する",
      "test_method": "npm pack && npm install -g commandmate-*.tgz && commandmate init --defaults && commandmate start --daemon && commandmate status && commandmate stop",
      "expected_result": "エラーなしでサーバーが起動・停止できる"
    },
    {
      "id": "AC-2",
      "description": "tsxがdevDependenciesのままで動作する",
      "test_method": "package.jsonのdependenciesにtsxが含まれていないことを確認",
      "expected_result": "tsxはdevDependenciesのみに存在"
    },
    {
      "id": "AC-3",
      "description": "開発モード（npm run dev）が引き続き動作する",
      "test_method": "npm run dev を実行して起動を確認",
      "expected_result": "開発サーバーが正常に起動"
    },
    {
      "id": "AC-4",
      "description": "全テストがパスする",
      "test_method": "npm run test:unit",
      "expected_result": "新規テスト失敗なし（既存の失敗は除外）"
    },
    {
      "id": "AC-5",
      "description": "パッケージサイズが許容範囲内",
      "test_method": "npm pack --dry-run",
      "expected_result": "100MB以下（standaloneモード検討トリガーは100MB超過）"
    },
    {
      "id": "AC-6",
      "description": "ci-pr.ymlでbuild:serverが検証される",
      "test_method": ".github/workflows/ci-pr.ymlにbuild:serverステップが存在することを確認",
      "expected_result": "Build serverステップが追加されている"
    },
    {
      "id": "AC-7",
      "description": "publish.ymlでbuild:serverが実行される",
      "test_method": ".github/workflows/publish.ymlにbuild:serverステップが存在することを確認",
      "expected_result": "Build serverステップとパッケージサイズ計測が追加されている"
    }
  ],
  "test_scenarios": [
    {
      "scenario": "ビルド検証",
      "steps": [
        "npm run build:server を実行",
        "dist/server/server.js が生成されることを確認",
        "@/パスが相対パスに変換されていることを確認"
      ]
    },
    {
      "scenario": "開発モード検証",
      "steps": [
        "npm run dev を実行",
        "サーバーが起動することを確認"
      ]
    },
    {
      "scenario": "品質チェック",
      "steps": [
        "npx tsc --noEmit を実行",
        "npm run lint を実行",
        "npm run test:unit を実行"
      ]
    }
  ],
  "tdd_result_path": "dev-reports/issue/113/pm-auto-dev/iteration-1/tdd-result.json"
}
